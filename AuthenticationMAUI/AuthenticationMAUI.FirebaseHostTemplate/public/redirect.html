<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
</head>
<body>
    <h1>REDIRECTING...</h1>
    <pre id="output"></pre>
    <script>      
        const fragment = window.location.hash.substring(1); // в url после '#'
        const params = new URLSearchParams(fragment);

        const idToken = params.get('id_token');
        const accessToken = params.get('access_token');

        const scheme = params.get('state') || 'myapp';

        if (idToken) {
            // Google
            window.location.href = scheme + '://auth?id_token=' + idToken;
        } else if (accessToken) {
            // Facebook
            window.location.href = scheme + '://auth?access_token=' + accessToken;
        } else {
            document.body.innerHTML = '<h2>Token not found</h2>';
        }
    </script>
</body>
</html>
